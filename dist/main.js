!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=2)}([function(e,t){const s={collide(e,t){const s=e.physics.width?e.physics.width:e.sprite.width,i=t.physics.width?t.physics.width:t.sprite.width,n=e.physics.height?e.physics.height:e.sprite.height,h=t.physics.height?t.physics.height:t.sprite.height;return e.physics.x<t.physics.x+i&&e.physics.x+s>t.physics.x&&e.physics.y<t.physics.y+h&&e.physics.y+n>t.physics.y},collide_with_scale(e,t){const s=e.physics.width?e.physics.width:e.sprite.width*e.sprite.width_scale,i=t.physics.width?t.physics.width:t.sprite.width*t.sprite.width_scale,n=e.physics.height?e.physics.height:e.sprite.height*e.sprite.height_scale,h=t.physics.height?t.physics.height:t.sprite.height*t.sprite.height_scale;return e.physics.x<t.physics.x+i&&e.physics.x+s>t.physics.x&&e.physics.y<t.physics.y+h&&e.physics.y+n>t.physics.y}};e.exports=s},function(e,t){},function(e,t,s){"use strict";s.r(t);var i=class{constructor(e,t,s=null,i=null){this.x=e,this.y=t,this.width=s,this.height=i,this.dLeft=0,this.dRight=0,this.dDown=0,this.dUp=0,this.dx=this.dx.bind(this),this.dy=this.dy.bind(this),this.speed=1}dx(){return-this.dLeft+this.dRight}dy(){return-this.dUp+this.dDown}updatePosition(){this.x+=this.dx(),this.y+=this.dy()}boundedUpdate(){const{dx:e,dy:t}=this;this.boundedMove({x:e(),y:t()},{top:0,down:580,left:80,right:350})}boundedMove(e,t){this.x+=e.x,this.y+=e.y,this.x<t.left&&(this.x=t.left),this.x>t.right&&(this.x=t.right),this.y<t.top&&(this.y=t.top),this.y>t.down&&(this.y=t.down)}};var n=class{constructor(e,t,s,i=1,n=1){this.img=e,this.height=t,this.width=s,this.width_scale=i,this.height_scale=n}};const h=new Image;h.src="./assets/images/road.png";var a=class{constructor(e){this.physics=e,this.sprite=new n(h,1262,502),this.score=0,this.gameOver=!1,this.box=null,this.marked=null}move(){this.physics.dDown=this.physics.speed}addScore(){this.gameOver?this.score:this.score+=1}makeGreen(){}stop(){this.physics.dDown=0,this.gameOver=!0}addSpeed(){}};const r=new Image,o=1.5,c=new Image;c.src="./assets/images/redbox.png";var d=class{constructor(e,t,s,i,h=-1){this.physics=e,r.src=t,this.sprite=new n(r,50,50,1*o,1*o),this.box=new n(c,40,50,1*o,1.3*o),this.marked=s,this.assetid=i,this.recognizedType=this.marked?"U":i[0],this.distance=h}updatesprite(e){r.src=e,this.sprite=new n(r,50,50,1*o,1*o)}move(){this.physics.dDown=this.physics.speed}stop(){this.physics.dDown=0}},l=s(0),y=s.n(l);const m=new Image,g=new Image,u=1.5;g.src="./assets/images/redbox.png";var p=class{constructor(e,t,s,i,h=-1){this.physics=e,m.src=t,this.sprite=new n(m,50,50,1*u,1*u),this.box=new n(g,40,50,1*u,1.3*u),this.marked=s,this.assetid=i,this.recognizedType=this.marked?"U":i[0],this.distance=h}updatesprite(e){m.src=e,this.sprite=new n(m,50,50,1*u,1*u)}move(){this.physics.dDown=this.physics.speed}stop(){this.physics.dDown=0}};const E=new Image,v=1.5,f=new Image;f.src="./assets/images/redbox.png";var T=class{constructor(e,t,s,i,h=-1){this.physics=e,E.src=t,this.sprite=new n(E,50,50,1*v,1*v),this.box=new n(f,40,50,1*v,1.3*v),this.marked=s,this.assetid=i,this.distance=h,this.recognizedType=this.marked?"U":i[0]}updatesprite(e){E.src=e,this.sprite=new n(E,50,50,1*v,1*v)}move(){this.physics.dDown=this.physics.speed}stop(){this.physics.dDown=0}};const k=new Image;k.src="./assets/images/car.png";var w=class{constructor(e){this.physics=e,this.sprite=new n(k,150,70),this.life=3,this.box=null,this.marked=null}hitObstacle(){this.life-=1}getLife(){this.life+=1}resetLife(){this.life=3}makeGreen(){}makeRed(){}draw(e){const{sprite:t,physics:s}=this,i=t.width/-2+s.width/2,n=t.height/-2+s.height/2;e.drawImage(t.img,0,0,t.width,t.height,s.x+i,s.y+n,t.width,t.height)}};var b=()=>({road:new a(new i(0,-561)),car:new w(new i(214,580,70,100))});s(1);const S="./assets/images/life/",O="./assets/images/obstacle/",I="./assets/images/money/";const _=80,R=150,A=350,x=.03,D=.01,C=115,L=Object.freeze({obstacle:"O",cash:"C",life:"L"}),B=Object.freeze({attention:"A",environment:"E"}),M=.3,Q=.3,P=3e3,U=19e3,N=4e3,j=1e4,q=2e3,z=500,F=5e3,W=1500,G=3e5,Y=1280,V=800;var H=!1;const X=Object.freeze({CREATE_ASSET:"CREATE_ASSET",CORRECT_BOXED_RESPONSE:"CORRECT_BOXED_RESPONSE",WRONG_BOXED_RESPONSE:"WRONG_BOXED_RESPONSE",TIMEOUT_BOXED_RESPONSE:"TIMEOUT_BOXED_RESPONSE",CORRECT_DIST_RESPONSE:"CORRECT_DIST_RESPONSE",WRONG_DIST_RESPONSE:"WRONG_DIST_RESPONSE",TIMEOUT_DIST_RESPONSE:"TIMEOUT_DIST_RESPONSE",RANDOMIZE_ICON:"RANDOMIZE_ICON",ENV_QUERY_CREATED:"ENV_QUERY_CREATED",ATT_QUERY_CREATED:"ATT_QUERY_CREATED",NEW_MAIN_QUERY:"NEW_MAIN_QUERY",ASSET_PASSED_CANVAS:"ASSET_PASSED_CANVAS",ASSET_CAR_COLLIDED:"ASSET_CAR_COLLIDED",NEW_DIST_QUERY:"NEW_DIST_QUERY",GAME_OVER:"GAME_OVER",GAME_START:"GAME_START"});var Z=null,$=null,J=15;function K(e){for(var t=0,s=1;s<e.length;s++)e[s]<e[t]&&(t=s);return t}class ee{constructor(e,t){this.canvas=e,this.ctx=t,this.gameOver=!1,this.rocks=[],this.life=[],this.cash=[],this.boxed=[],this.assets=b(),this.animate=null,this.lifeImgSrc="./assets/images/life/life (1).png",this.rockImgSrc="./assets/images/obstacle/obstacle (1).png",this.moneyImgSrc="./assets/images/money/money (1).png",this.lifeImgLists=[],this.moneyImgLists=[],this.obstacleImgLists=[],this.numImgs=16,this.assetidCounter=-1,this.activeResponse=!1,this.stopBlink=!1,this.queryType=null,this.queryTimeElapsed=!1,this.queryUserResponded=!1;var s=new Date;this.timeOfLastEnvQuery=s.getTime(),this.timeOfLastAttQuery=s.getTime(),this.timeOfLastDistractorTask=s.getTime(),this.timeOfEnvQueryPlanning=-1,this.randomIthObjectForEnvQuery=1e8,this.objectCounterForEnvQuery=-1,this.startTime=2*G,this.num2=0,this.num3=0,this.num1=0,this.distractorTaskActive=!0,this.dataLog="",this.newDistractorTask();for(var i=0;i<this.numImgs;i++)this.lifeImgLists.push(S+"life ("+(i+1).toString()+").png"),this.moneyImgLists.push(I+"money ("+(i+1).toString()+").png"),this.obstacleImgLists.push(O+"obstacle ("+(i+1).toString()+").png");document.getElementById("obstacle").style["background-image"]="url('"+this.rockImgSrc+"')",document.getElementById("money").style["background-image"]="url('"+this.moneyImgSrc+"')",document.getElementById("life").style["background-image"]="url('"+this.lifeImgSrc+"')"}holdCanvas(e,t){var s=window.setInterval(function(){document.getElementById("canvas").style.border="20px solid "+t},5);setTimeout(function(e){document.getElementById("canvas").style.border="20px solid black",clearInterval(e)},e,s)}holdDistractorCanvas(e,t){var s=window.setInterval(function(){document.getElementById("distractortask").style.border="20px solid "+t},5);setTimeout(function(e){document.getElementById("distractortask").style.border="20px solid black",clearInterval(e)},e,s)}blinkCanvas(e,t,s){var i=window.setInterval(function(){document.getElementById("canvas").style.border!="20px solid "+s?document.getElementById("canvas").style.border="20px solid "+s:document.getElementById("canvas").style.border="20px solid black"},e);setTimeout(function(e){document.getElementById("canvas").style.border="20px solid black",clearInterval(e)},t,i)}askEnvironmentQueryBasedOnEnvironmentProbFunction_deprecated(){var e=new Date;if(this.timeOfEnvQueryPlanning<0&&this.timeOfLastAttQuery>this.timeOfLastEnvQuery&&e.getTime()-this.timeOfLastAttQuery>.5*P){var t=this.timeOfLastAttQuery+U-e.getTime()-.5*P;return t>0&&(this.randomTimeIntervalEnvQuery=Math.random()*t,console.log("Random time interval is "+.001*this.randomTimeIntervalEnvQuery+" seconds."),this.timeOfEnvQueryPlanning=e.getTime()),!1}if(e.getTime()-this.timeOfEnvQueryPlanning>this.randomTimeIntervalEnvQuery)return this.timeOfEnvQueryPlanning=-1,!0}askEnvironmentQueryBasedOnEnvironmentProbFunction(){var e=new Date;if(this.timeOfEnvQueryPlanning<0&&this.timeOfLastAttQuery>this.timeOfLastEnvQuery){var t=Math.floor((U-2*N)/j);console.log("Objects between attn queries ",t),this.randomIthObjectForEnvQuery=Math.floor(Math.random()*t)+1,console.log("Object Selected for env query ",this.randomIthObjectForEnvQuery),this.timeOfEnvQueryPlanning=this.timeOfLastAttQuery}return e.getTime()-this.timeOfEnvQueryPlanning>this.randomIthObjectForEnvQuery*j-500||e.getTime()-this.timeOfEnvQueryPlanning<this.randomIthObjectForEnvQuery*j+500?(this.timeOfEnvQueryPlanning=-1,!0):(console.log("Uncharted waters"),!1)}setRecognizedType(e,t){var s;switch(e[0]){case"O":for(s=0;s<this.rocks.length;s++)if(this.rocks[s].assetid==e){this.rocks[s].recognizedType=t;break}break;case"L":for(s=0;s<this.life.length;s++)if(this.life[s].assetid==e){this.life[s].recognizedType=t;break}break;case"C":for(s=0;s<this.cash.length;s++)if(this.cash[s].assetid==e){this.cash[s].recognizedType=t;break}break;default:console.log("Unrecognized asset type")}}newDistractorTask(){var e=new Date;this.num2=Math.floor(100*Math.random()),this.num3=Math.floor(10*Math.random()),this.num1=this.num2+this.num3,document.getElementById("num1").innerHTML=this.num1.toString(),document.getElementById("num2").innerHTML=this.num2.toString(),document.getElementById("num3").innerHTML="?",this.timeOfLastDistractorTask=e.getTime(),this.logEvent(X.NEW_DIST_QUERY,this.num1.toString()+"-"+this.num2.toString()+" = ???")}checkDistractorTaskAnswer(e){this.num3>=0&&(e==this.num3?(this.holdDistractorCanvas(W,"green"),this.logEvent(X.CORRECT_DIST_RESPONSE,this.num1.toString()+"-"+this.num2.toString()+"="+e.toString())):(this.holdDistractorCanvas(W,"red"),this.logEvent(X.WRONG_DIST_RESPONSE,this.num1.toString()+"-"+this.num2.toString()+"="+e.toString())),document.getElementById("num3").innerHTML=e.toString()),this.distractorTaskActive=!1;var t=this;setTimeout(function(){t.newDistractorTask(),t.distractorTaskActive=!0},W)}checkUserResponse(e){this.boxed.length>0&&this.activeResponse&&(this.queryUserResponded=!0,this.boxed[0][0]==e?(this.holdCanvas(2e3,"green"),this.activeResponse=!1,this.setRecognizedType(this.boxed[0],e),this.logEvent(X.CORRECT_BOXED_RESPONSE,e+"-"+this.boxed[0])):(this.holdCanvas(2e3,"red"),this.activeResponse=!1,this.setRecognizedType(this.boxed[0],e),this.logEvent(X.WRONG_BOXED_RESPONSE,e+"-"+this.boxed[0])))}updateDistractorTimeBar(){var e=new Date;if(this.distractorTaskActive){var t=(F-(e.getTime()-this.timeOfLastDistractorTask))/1e3;if(document.getElementById("distractorBar").style.width=t/(.001*F)*100+"%",document.getElementById("distractorBarTime").innerHTML=`${Math.floor(10*t)/10+"s"}`,t<.05){this.holdDistractorCanvas(W,"red"),this.distractorTaskActive=!1,this.logEvent(X.TIMEOUT_DIST_RESPONSE,this.num1.toString()+"-"+this.num2.toString()+" = ???");var s=this;setTimeout(function(){s.newDistractorTask(),s.distractorTaskActive=!0},W)}}}updateTimeBar(){if(Array.isArray(this.boxed)&&!this.boxed.length||this.queryTimeElapsed||this.queryUserResponded)document.getElementById("myProgress").style.display="none",document.getElementById("keyW").style.display="none",document.getElementById("keyQ").style.display="none",document.getElementById("keyE").style.display="none",document.getElementById("maintaskQuestion").style.display="none";else{document.getElementById("myProgress").style.display="block",document.getElementById("keyW").style.display="flex",document.getElementById("keyQ").style.display="flex",document.getElementById("keyE").style.display="flex",document.getElementById("maintaskQuestion").style.display="block";var e=this.closestObject(),t=null,s=null;const a=this.assets.car.physics.y;this.assets.car.physics.height?this.assets.car.physics.height:(this.assets.car.sprite.height,this.assets.car.sprite.height_scale);var i,n=0;if(0==e?(s=this.cash[0].physics.height?this.cash[0].physics.height:this.cash[0].sprite.height*this.cash[0].sprite.height_scale,t=this.cash[0].physics.y,i=(new Date).getTime()):1==e?(s=this.rocks[0].physics.height?this.rocks[0].physics.height:this.rocks[0].sprite.height*this.rocks[0].sprite.height_scale,t=this.rocks[0].physics.y,i=(new Date).getTime()):2==e&&(s=this.life[0].physics.height?this.life[0].physics.height:this.life[0].sprite.height*this.life[0].sprite.height_scale,t=this.life[0].physics.y,i=(new Date).getTime()),null==Z&&(n=null,Z=i),null==$&&(n=null,$=t,Z=i),null==t&&(n=null),null!=t&&null!=$&&t<$&&(n=null,$=t,Z=i),null!=n){new Date;J=a/(n=60);var h=(a-(t+s))/n;$=t,Z=i,document.getElementById("myBar").style.width=(h-.001*q)/J*100+"%",document.getElementById("myBarTime").innerHTML=`${Math.floor(10*(h-.001*q))/10+"s"}`,h<.001*q&&h>.1&&!this.queryTimeElapsed&&!this.queryUserResponded&&(this.queryType==B.attention?this.setRecognizedType(this.boxed[0],this.boxed[0][0]):this.queryType==B.environment&&this.setRecognizedType(this.boxed[0],this.boxed[0][0]==L.obstacle?L.life:L.obstacle),this.holdCanvas(2e3,"red"),this.activeResponse=!1,this.queryTimeElapsed=!0,this.logEvent(X.TIMEOUT_BOXED_RESPONSE,"U-"+this.boxed[0]))}}}static checkCollision(e,t,s,i,n,h){t instanceof p&&y.a.collide_with_scale(e,t)&&(e.hitObstacle(),e.makeRed(),s.splice(s.indexOf(t),1),-1!=n.indexOf(t.assetid)&&(n.splice(n.indexOf(t.assetid),1),h.logEvent(X.ASSET_CAR_COLLIDED,t.assetid))),t instanceof d&&y.a.collide_with_scale(e,t)&&(e.getLife(),e.makeGreen(),s.splice(s.indexOf(t),1),-1!=n.indexOf(t.assetid)&&(n.splice(n.indexOf(t.assetid),1),h.logEvent(X.ASSET_CAR_COLLIDED,t.assetid))),t instanceof T&&y.a.collide_with_scale(e,t)&&(i.road.score+=100,i.road.makeGreen(),s.splice(s.indexOf(t),1),-1!=n.indexOf(t.assetid)&&(n.splice(n.indexOf(t.assetid),1),h.logEvent(X.ASSET_CAR_COLLIDED,t.assetid)))}obstacleProbablityFunction(){return Math.random()>.5}moneyProbablityFunction(){return Math.random()>.5}lifeProbablityFunction(){return Math.random()>.5}objectTypeProbablityFunction(){var e=Math.random();return e>0&&e<.33?L.obstacle:e>=.33&&e<.66?L.life:L.cash}boxDistanceProbablityFunction(){return M+Math.random()*(Q-M)}static checkCanvas(e,t,s,i){e instanceof d&&e.physics.y>canvas.height&&(t.splice(t.indexOf(e),1),-1!=s.indexOf(e.assetid)&&(s.splice(s.indexOf(e.assetid),1),i.logEvent(X.ASSET_PASSED_CANVAS,e.assetid))),e instanceof p&&e.physics.y>canvas.height&&(t.splice(t.indexOf(e),1),-1!=s.indexOf(e.assetid)&&(s.splice(s.indexOf(e.assetid),1),i.logEvent(X.ASSET_PASSED_CANVAS,e.assetid))),e instanceof T&&e.physics.y>canvas.height&&(t.splice(t.indexOf(e),1),-1!=s.indexOf(e.assetid)&&(s.splice(s.indexOf(e.assetid),1),i.logEvent(X.ASSET_PASSED_CANVAS,e.assetid)))}drawAsset(e){const{physics:t,sprite:s,box:i,marked:n,distance:h}=e;e instanceof a&&e.physics.y>=0&&s.height>canvas.height&&(e.physics.y>canvas.height&&(e.physics.y=canvas.height-s.height),this.ctx.drawImage(s.img,0,0,s.width,s.height,e.physics.x,e.physics.y-s.height+1,s.width,s.height)),e instanceof p&&e.physics.y>=0&&e.physics.y>canvas.height&&this.ctx.drawImage(s.img,0,0,s.width,s.height,e.physics.x,e.physics.y-900,s.width*s.width_scale,s.height*s.height_scale),e instanceof w?e.draw(this.ctx):(this.ctx.drawImage(s.img,0,0,s.width,s.height,t.x,t.y,s.width*s.width_scale,s.height*s.height_scale),n&&t.y>h*this.canvas.height&&(-1==this.boxed.indexOf(e.assetid)?0==this.boxed.length&&(this.boxed.push(e.assetid),this.blinkCanvas(30,300,"blue"),this.activeResponse=!0,this.queryTimeElapsed=!1,this.queryUserResponded=!1,this.logEvent(X.NEW_MAIN_QUERY,e.assetid)):this.ctx.drawImage(i.img,0,0,i.width,i.height,t.x+.5*(s.width*s.width_scale-i.width*i.width_scale),e.physics.y+.5*(s.height*s.height_scale-i.height*i.height_scale),i.width*i.width_scale,i.height*i.height_scale))),0!=this.assets.car.life&&(e instanceof w?t.boundedUpdate():t.updatePosition())}randomizesprite(){var e=Math.floor(Math.random()*Math.floor(this.numImgs)),t=Math.floor(Math.random()*Math.floor(this.numImgs)),s=Math.floor(Math.random()*Math.floor(this.numImgs));this.lifeImgSrc=this.lifeImgLists[e],this.moneyImgSrc=this.moneyImgLists[t],this.rockImgSrc=this.obstacleImgLists[s],document.getElementById("obstacle").style["background-image"]="url('"+this.rockImgSrc+"')",document.getElementById("money").style["background-image"]="url('"+this.moneyImgSrc+"')",document.getElementById("life").style["background-image"]="url('"+this.lifeImgSrc+"')",this.logEvent(X.RANDOMIZE_ICON,this.lifeImgSrc+":"+this.moneyImgSrc+":"+this.rockImgSrc)}draw(){if(!this.gameOver){const e=()=>{const t=Object.values(this.assets);this.animate=requestAnimationFrame(e),this.ctx.clearRect(0,0,canvas.width,canvas.height);for(let e=0;e<t.length;e++)this.drawAsset(t[e]);this.rocks.forEach(e=>{ee.checkCollision(this.assets.car,e,this.rocks,this.assets,this.boxed,this),ee.checkCanvas(e,this.rocks,this.boxed,this)}),this.life.forEach(e=>{ee.checkCollision(this.assets.car,e,this.life,this.assets,this.boxed,this),ee.checkCanvas(e,this.life,this.boxed,this)}),this.cash.forEach(e=>{ee.checkCollision(this.assets.car,e,this.cash,this.assets,this.boxed,this),ee.checkCanvas(e,this.cash,this.boxed,this)}),this.life.forEach(e=>{this.drawAsset(e),e.move()}),this.rocks.forEach(e=>{this.drawAsset(e),e.move()}),this.cash.forEach(e=>{this.drawAsset(e),e.move()}),this.assets.road.addScore(),this.end()};e()}}end(){var e=new Date;e.getTime()-this.startTime>G&&(this.logEvent(X.GAME_OVER,""),this.gameOver=!0,this.assets.road.stop(),this.activeResponse=!1,this.distractorTaskActive=!1,this.draw(),document.getElementById("slow").innerHTML="Game Over!",document.getElementById("how").style.visibility="hidden",document.getElementById("welcome").style.display=null),e.getTime()-this.startTime>G&&!H&&(console.log(this.dataLog),H=!0)}createRock(e){var t=this.boxDistanceProbablityFunction();this.rocks.push(new p(new i(Math.floor(310*Math.random())+80,-20),this.rockImgSrc,e,L.obstacle+(++this.assetidCounter).toString(),t)),this.logEvent(X.CREATE_ASSET,L.obstacle+this.assetidCounter.toString()),this.queryType==B.environment?this.logEvent(X.ENV_QUERY_CREATED,L.obstacle+this.assetidCounter.toString()+":"+t):this.queryType==B.attention&&this.logEvent(X.ATT_QUERY_CREATED,L.obstacle+this.assetidCounter.toString()+":"+t)}createLife(e){var t=this.boxDistanceProbablityFunction();this.life.push(new d(new i(Math.floor(310*Math.random())+80,-20),this.lifeImgSrc,e,L.life+(++this.assetidCounter).toString(),t)),this.logEvent(X.CREATE_ASSET,L.life+this.assetidCounter.toString()),this.queryType==B.environment?this.logEvent(X.ENV_QUERY_CREATED,L.life+this.assetidCounter.toString()+":"+t):this.queryType==B.attention&&this.logEvent(X.ATT_QUERY_CREATED,L.life+this.assetidCounter.toString()+":"+t)}createCash(e){var t=this.boxDistanceProbablityFunction();this.cash.push(new T(new i(Math.floor(310*Math.random())+80,-20),this.moneyImgSrc,e,L.cash+(++this.assetidCounter).toString(),t)),this.logEvent(X.CREATE_ASSET,L.cash+this.assetidCounter.toString()),this.queryType==B.environment?this.logEvent(X.ENV_QUERY_CREATED,L.cash+this.assetidCounter.toString()+":"+t):this.queryType==B.attention&&this.logEvent(X.ATT_QUERY_CREATED,L.cash+this.assetidCounter.toString()+":"+t)}cleanUp(){window.cancelAnimationFrame(this.animate)}releaseControls(){this.assets.car.physics.dLeft=0,this.assets.car.physics.dRight=0,this.assets.car.physics.dUp=0,this.assets.car.physics.dDown=0}moveLeft(e){this.assets.car.physics.dLeft=e}moveRight(e){this.assets.car.physics.dRight=e}closestObject(){var e,t,s;e=this.cash&&this.cash.length>0?this.cash[0].physics.y:-1e4,t=this.rocks&&this.rocks.length>0?this.rocks[0].physics.y:-1e4,s=this.life&&this.life.length>0?this.life[0].physics.y:-1e4;var i=this.assets.car.physics.y,n=[1e4*(i-e<=-C)+(i-e)*(i-e>-C),1e4*(i-t<=-C)+(i-t)*(i-t>-C),1e4*(i-s<=-C)+(i-s)*(i-s>-C)],h=K(n);return n[h]>1e4&&(h=3),h}closestObjectAndLocation(){var e,t,s,i,n=0,h=3;this.cash&&this.cash.length>0?"U"!=this.cash[0].recognizedType&&(e=this.cash[0].physics.y,h="C"==this.cash[0].recognizedType?0:"O"==this.cash[0].recognizedType?1:2,n=this.cash[0].physics.x):e=-1e4,this.rocks&&this.rocks.length>0?"U"!=this.rocks[0].recognizedType&&(t=this.rocks[0].physics.y,h="O"==this.rocks[0].recognizedType?1:"C"==this.rocks[0].recognizedType?0:2,n=this.rocks[0].physics.x):t=-1e4,this.life&&this.life.length>0?"U"!=this.life[0].recognizedType&&(s=this.life[0].physics.y,h="L"==this.life[0].recognizedType?2:"C"==this.life[0].recognizedType?0:1,n=this.life[0].physics.x):s=-1e4;var a=this.assets.car.physics.y,r=[1e4*(a-e<=-C)+(a-e)*(a-e>-C),1e4*(a-t<=-C)+(a-t)*(a-t>-C),1e4*(a-s<=-C)+(a-s)*(a-s>-C)],o=K(r);return i=o,r[o]>1e4&&(o=3,n=0),[i,h,n]}rockAvoider(e){var t=this.assets.car.physics.x,s=(Math.abs(e-t)>=_?t:e>=t?t-R>=_-(e-t)?e-_:e+_:A-t>_-(t-e)?e+_:e-_)-t;s>0?this.moveRight(x*s):s<0&&this.moveLeft(-x*s)}objectGetter(e){var t=e-this.assets.car.physics.x;t>=0?this.moveRight(D*t):this.moveLeft(-D*t)}logEvent(e,t){if(!this.gameOver){var s=new Date;this.dataLog+=s.getTime().toString()+","+e+","+t+"\n"}}moveRandom(e){Math.random()>=.5?this.moveLeft(e):this.moveRight(e)}start(){var e=new Date;this.gameOver=!1,this.startTime=e.getTime(),document.getElementById("welcome").style.display="none",this.assets.car.resetLife(),this.logEvent(X.GAME_START,""),console.log("Screen Res - Width:"+screen.width+"Height:"+screen.height),screen.width>=Y-1&&screen.height>=V-1?(setInterval(()=>{if(!this.gameOver){var e=new Date,t=Array.isArray(this.boxed)&&!this.boxed.length,s=t&&e.getTime()-this.timeOfLastAttQuery>U,i=t&&!s&&this.askEnvironmentQueryBasedOnEnvironmentProbFunction()&&this.timeOfLastAttQuery+U-e.getTime()>.5*P;switch(console.log("Checking if env query: ",i),i&&(console.log("Asking Environment Query: "+(e.getTime()-this.timeOfLastEnvQuery).toString()),this.timeOfLastEnvQuery=e.getTime()),s&&(console.log("Asking Attention Query:"+(e.getTime()-this.timeOfLastAttQuery).toString()),this.timeOfLastAttQuery=e.getTime()),this.queryType=s?B.attention:i?B.environment:null,this.objectTypeProbablityFunction()){case L.obstacle:this.createRock(i||s);break;case L.life:this.createLife(i||s);break;case L.cash:this.createCash(i||s)}0}},j),setInterval(()=>{this.randomizesprite()},84e3),setInterval(()=>{this.updateTimeBar()},50),setInterval(()=>{this.updateDistractorTimeBar()},50),setInterval(()=>{var e;this.releaseControls(),1==(e=this.closestObjectAndLocation())[1]?this.rockAvoider(e[2]):0!=e[1]&&2!=e[1]||this.objectGetter(e[2])},z),this.draw(),this.assets.road.move()):(this.gameOver=!0,document.getElementById("slow").innerHTML="You need a minimum display resolution of 1280x800 to take part in this study",document.getElementById("how").style.visibility="hidden",document.getElementById("welcome").style.display=null)}}var te=ee;var se=e=>{window.addEventListener("keydown",t=>{e.assets.car,"q"!==t.key&&"Q"!==t.key||(e.checkUserResponse("O"),document.getElementById("keyQ").style["background-color"]="rgba(100,100,100, 0.8)"),"w"!==t.key&&"W"!==t.key||(e.checkUserResponse("C"),document.getElementById("keyW").style["background-color"]="rgba(100,100,100, 0.8)"),"e"!==t.key&&"E"!==t.key||(e.checkUserResponse("L"),document.getElementById("keyE").style["background-color"]="rgba(100,100,100, 0.8)"),"1"===t.key&&e.checkDistractorTaskAnswer(1),"2"===t.key&&e.checkDistractorTaskAnswer(2),"3"===t.key&&e.checkDistractorTaskAnswer(3),"4"===t.key&&e.checkDistractorTaskAnswer(4),"5"===t.key&&e.checkDistractorTaskAnswer(5),"6"===t.key&&e.checkDistractorTaskAnswer(6),"7"===t.key&&e.checkDistractorTaskAnswer(7),"8"===t.key&&e.checkDistractorTaskAnswer(8),"9"===t.key&&e.checkDistractorTaskAnswer(9),"0"===t.key&&e.checkDistractorTaskAnswer(0)}),window.addEventListener("keyup",t=>{e.assets.car,"q"!==t.key&&"Q"!==t.key||(e.checkUserResponse("O"),document.getElementById("keyQ").style["background-color"]="rgba(200,200,200, 0.6)"),"w"!==t.key&&"W"!==t.key||(e.checkUserResponse("C"),document.getElementById("keyW").style["background-color"]="rgba(200,200,200, 0.6)"),"e"!==t.key&&"E"!==t.key||(e.checkUserResponse("L"),document.getElementById("keyE").style["background-color"]="rgba(200,200,200, 0.6)")})};(new Image).src="./assets/images/redbox.png";window.lifeimgLst="",window.obstacleimgLst="",window.moneyImgLst="";s(1);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("canvas"),t=e.getContext("2d");e.height=700,e.width=500;let s=new te(e,t);document.getElementById("how").innerHTML="v1 - Use directional arrows or WSAD to move your car around. Collect as much cash as you can to increase your points while avoiding the rocks!",document.getElementById("play-btn").addEventListener("click",()=>{!0===s.gameOver&&(s.cleanUp(),s=new te(e,t)),se(s),s.start()})})}]);